(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(27)},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(13),i=a.n(r),c=(a(22),a(23),a(15)),o=a(4),l=a(5),u=a(10),m=a(7),h=a(9),f=a(29),g=a(30),d=a(31),b=a(32),p=(a(24),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("video",{id:this.props.idAttr,className:"video"})}}]),t}(s.a.Component)),v=(a(25),function(){function e(){Object(o.a)(this,e),this.ws=null,this.user=null,this.onMessageCb=function(){},this.onRegisterCb=function(){}}return Object(l.a)(e,[{key:"setUser",value:function(e){this.user=e}},{key:"onMessage",value:function(e){this.onMessageCb=e}},{key:"onRegister",value:function(e){this.onRegisterCb=e}},{key:"connect",value:function(){var e=this;this.ws=new WebSocket("wss://r12aimxa21.execute-api.eu-west-2.amazonaws.com/Prod"),this.ws.onmessage=function(t){var a=JSON.parse(t.data);switch(a.action){case"registerSuccess":e.onRegisterCb(!0,a.payload);break;case"communticate":e.onMessageCb(a.payload);break;default:e.onRegisterCb(!1)}}}},{key:"send",value:function(e){if(!this.ws)throw new Error("Connection is lost or has not been established yet");this.user&&(e.from=this.user),this.ws.send(JSON.stringify({message:"sendmessage",data:e}))}},{key:"register",value:function(e){this.send({action:"register",payload:e})}},{key:"communicate",value:function(e,t){this.send({action:"communicate",payload:{to:e,message:t}})}}]),e}()),w=(a(26),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"message"},s.a.createElement("span",{className:"message__title"},this.props.item.from),s.a.createElement("div",null,this.props.item.message))}}]),t}(s.a.Component)),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).ws=new v,a.toNameRef=s.a.createRef(),a.toMessageRef=s.a.createRef(),a.handleOnSendMessageClick=function(){var e=a.toNameRef.current&&a.toNameRef.current.value,t=a.toMessageRef.current&&a.toMessageRef.current.value;e&&t&&a.ws.communicate(e,t)},a.state={name:null,messages:[]},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(f.a,null,s.a.createElement(g.a,null,s.a.createElement(d.a,null,s.a.createElement(p,{idAttr:"self"})),s.a.createElement(d.a,null,s.a.createElement(p,{idAttr:"remote"}))),s.a.createElement(g.a,null,s.a.createElement(d.a,null,s.a.createElement(b.a,{onClick:function(){return e.handleOnRegisterClick()},variant:"success"},"Register")),s.a.createElement(d.a,null,s.a.createElement(b.a,{variant:"danger"},"Abort call")),s.a.createElement(d.a,null,"Logged in as: ",this.state.name)),s.a.createElement(g.a,null,s.a.createElement(d.a,null,s.a.createElement("input",{ref:this.toNameRef,placeholder:"Message to...",type:"text"}),s.a.createElement("textarea",{ref:this.toMessageRef,placeholder:"Message body..."})),s.a.createElement(d.a,null,s.a.createElement(b.a,{onClick:this.handleOnSendMessageClick,variant:"success"},"Send message")),s.a.createElement(d.a,null,"Messages: ",this.state.messages.map(function(e,t){return s.a.createElement(w,{item:e,key:t})}))))}},{key:"componentWillMount",value:function(){var e=this;this.ws.connect(),this.ws.onRegister(function(t,a){e.setState({name:t&&a?a:null})}),this.ws.onMessage(function(t){e.setState({messages:[].concat(Object(c.a)(e.state.messages),[t])})})}},{key:"handleOnRegisterClick",value:function(){var e=prompt("Enter a name");e&&this.ws.register(e)}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.0cd85406.chunk.js.map